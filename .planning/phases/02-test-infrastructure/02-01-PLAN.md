---
phase: 02-test-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .github/workflows/ci.yml
autonomous: true

must_haves:
  truths:
    - "CI workflow runs tests on Julia 1.6"
    - "CI workflow runs tests on Julia 1.10"
    - "CI workflow runs tests on Julia 1.11"
  artifacts:
    - path: ".github/workflows/ci.yml"
      provides: "CI configuration with multi-version Julia testing"
      contains: "julia-version: ['1.6', '1.10', '1.11']"
  key_links:
    - from: "GitHub Actions"
      to: "Julia test suite"
      via: "julia-actions/setup-julia@v2"
      pattern: "matrix.julia-version"
---

<objective>
Expand CI matrix to test Julia 1.6, 1.10, and 1.11 versions.

Purpose: DEBT-03 - Ensure package works across all supported Julia versions.
Output: Updated ci.yml with multi-version testing.

**Current State:**
- CI only tests Julia 1.11
- Project.toml declares compatibility: `julia = "1.6, 1.7, 1.8, 1.9, 1.10, 1.11"`

**Target State:**
- CI tests minimum supported version (1.6), latest LTS (1.10), and latest stable (1.11)
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Current CI Matrix (ci.yml)
# strategy:
#   matrix:
#     julia-version: ['1.11']
#
# Need to change to:
# strategy:
#   matrix:
#     julia-version: ['1.6', '1.10', '1.11']
#
# Note: Julia 1.6 has slower compilation, may need timeout adjustment
</context>

<tasks>

<task type="auto">
  <name>Update CI matrix for Julia 1.6, 1.10, 1.11</name>
  <files>.github/workflows/ci.yml</files>
  <action>
Update the test job matrix to include all three Julia versions:

1. Find the `julia-version` matrix entry (currently `['1.11']`)
2. Change to `['1.6', '1.10', '1.11']`
3. Consider adding `continue-on-error` for 1.6 if there are known issues

Example change:
```yaml
strategy:
  fail-fast: false
  matrix:
    os: [ubuntu-latest, windows-latest]
    julia-version: ['1.6', '1.10', '1.11']
```

Note: Julia 1.6 may require longer timeouts due to slower compilation.
  </action>
  <verify>grep "julia-version.*1.6.*1.10.*1.11" .github/workflows/ci.yml</verify>
  <done>CI matrix updated with Julia 1.6, 1.10, 1.11</done>
</task>

<task type="auto">
  <name>Add timeout for Julia 1.6 tests</name>
  <files>.github/workflows/ci.yml</files>
  <action>
Julia 1.6 has slower package precompilation. Add timeout-minutes to the test job:

```yaml
test:
  runs-on: ${{ matrix.os }}
  timeout-minutes: 30  # Add timeout for slower Julia 1.6
  strategy:
    ...
```

This prevents CI from hanging on slow 1.6 builds.
  </action>
  <verify>grep "timeout-minutes" .github/workflows/ci.yml</verify>
  <done>Timeout added to prevent slow 1.6 builds from hanging CI</done>
</task>

<task type="auto">
  <name>Update lint job to use Julia 1.10</name>
  <files>.github/workflows/ci.yml</files>
  <action>
The lint job uses Julia 1.11. Keep it on a stable version for formatter compatibility.

Option: Update to 1.10 (LTS) for better stability, or keep 1.11.

Verify JuliaFormatter works on all target versions before changing.
  </action>
  <verify>Lint job runs successfully</verify>
  <done>Lint job configuration verified</done>
</task>

</tasks>

<verification>
1. Push changes to a branch and verify CI runs on all 3 Julia versions
2. Check that all matrix combinations pass (3 versions Ã— 2 OS = 6 jobs)
3. Verify no timeout failures on Julia 1.6
</verification>

<success_criteria>
- CI tests Julia 1.6, 1.10, and 1.11
- All test jobs complete within timeout
- CI passes on all supported versions
</success_criteria>

<output>
After completion, create `.planning/phases/02-test-infrastructure/02-01-SUMMARY.md`
</output>
